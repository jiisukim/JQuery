<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<script type="text/javascript">
		function rrn() {
			var rrNum = document.getElementById("birth").value;
			var genNum = parseInt(rrNum.substr(7,1));	// 주민번호 뒷자리 첫번째 글자
			var gender ="";
			var year= rrNum.substr(0,2)+"년 "+rrNum.substr(2,2)+"월 "+rrNum.substr(4,2)+"일";
// 			var age = 0;
			switch(genNum){
			case 1 : 
				gender = "남자";
				year = 19 + year;
				break;
			case 3: 
				gender = "남자";
				year = 20 + year;
				break;
			case 2: 
				gender = "여자";
				year = 19 + year;
				break;			
			case 4:
				gender = "여자";
				year = 20 + year;
				break;
			default :	
				alert("잘못 입력하셨습니다.(입력값 : " + rrNum + " )");
				return;
			}
			var age = (2021 - year.substr(0,4)) + 1;
			document.getElementById("info").innerHTML = "생일 : "+ year + "<br> 성별 : " + gender + "<br> 나이: " + age; 					
		}
		
		
		function checkNum() {
			var rrNum = document.getElementById("birth2").value;		
			var sum = 0;

			for(var i=0; i<rrNum.length-1; i++){
				var chAt = rrNum.charAt(i);
				if(i <= 5){
					sum += (chAt * (i+2)); 
				}else if(i==7 || i==8){
					sum += (chAt * (i+1));
				}else{
					if(i != rrNum.indexOf("-")){
						sum += (chAt * (i-7));
					}
				}
			}
			var result = 11 - (sum % 11);
			if(result == 10){
				result = 0;
			}else if(result == 11){
				result = 1;
			}
			if(rrNum.charAt(rrNum.length-1) == result){
				document.getElementById("check").innerHTML = "올바른 번호입니다.";
			}else{
				document.getElementById("check").innerHTML = "잘못된 번호입니다.";
			}
		}
	</script>
</head>
<body>
	<p>문제 1 : 주민등록번호를 입력받아 생년월일과 성별을 출력하는 프록그램을 작성하시오</p>
	주민등록번호를 입력해주세요("-"포함)<input type="text" id="birth">
	<button type="button" onclick="rrn()">실행</button>
	<p id="info"></p>
	<hr>
	<p>문제2: 주민등록번호를 입력 받아 주민등록번호의 유효성을 검사하는 프로그램을 작성하시오</p>
	주민등록번호를 입력해주세요("-"포함)<input type="text" id="birth2">
	<button type="button" onclick="checkNum()">실행</button>
	<p id="check"></p>
	
	
</body>
</html>